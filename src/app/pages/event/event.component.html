<div class="main-content">
    <div class="container">
        <div class="page-header">
            <h1>Research Events & Conferences</h1>
            <p>Join our academic events, workshops, conferences, and research presentations</p>
        </div>
        <nav class="navbar">
        <div class="nav-container">
            <a href="#" class="logo">
            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjYwIiB2aWV3Qm94PSIwIDAgMjAwIDYwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KPGcgaWQ9IkxpbXRpYyI+DQo8IS0tIEdyZWVuIGNvbXB1dGVyL3BpeGVsIGljb24gLS0+DQo8cmVjdCB4PSIxNSIgeT0iMTUiIHdpZHRoPSI4IiBoZWlnaHQ9IjgiIGZpbGw9IiM5QUZGMDAiLz4NCjxyZWN0IHg9IjI2IiB5PSIxNSIgd2lkdGg9IjgiIGhlaWdodD0iOCIgZmlsbD0iIzlBRkYwMCIvPg0KPHJlY3QgeD0iMTUiIHk9IjI2IiB3aWR0aD0iOCIgaGVpZ2h0PSI4IiBmaWxsPSIjOUFGRjAwIi8+DQo8cmVjdCB4PSIzNyIgeT0iMTUiIHdpZHRoPSI4IiBoZWlnaHQ9IjgiIGZpbGw9IiM5QUZGMDAiLz4NCjxyZWN0IHg9IjM3IiB5PSIzNyIgd2lkdGg9IjgiIGhlaWdodD0iOCIgZmlsbD0iIzlBRkYwMCIvPg0KPHJlY3QgeD0iNDgiIHk9IjI2IiB3aWR0aD0iOCIgaGVpZ2h0PSI4IiBmaWxsPSIjOUFGRjAwIi8+DQo8IS0tIEJsYWNrIGxpbmVzIC0tPg0KPHJlY3QgeD0iNTQiIHk9IjE1IiB3aWR0aD0iNCIgaGVpZ2h0PSI4IiBmaWxsPSIjMDAwIi8+DQo8cmVjdCB4PSI1NCIgeT0iMzciIHdpZHRoPSI0IiBoZWlnaHQ9IjgiIGZpbGw9IiMwMDAiLz4NCjwhLS0gVGV4dCAtLT4NCjx0ZXh0IHg9IjcwIiB5PSI0MiIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjMwIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iIzMzMyI+bGltdGljPC90ZXh0Pg0KPC9nPg0KPC9zdmc+" 
                alt="LIMTIC" style="height: 40px; width: auto;">
            </a>
            <ul class="nav-menu">
            <li><a routerLink="/home" class="nav-link" routerLinkActive="active">Home</a></li>
            <li><a routerLink="/event" class="nav-link" routerLinkActive="active">Events</a></li>
            <li><a routerLink="/project" class="nav-link" routerLinkActive="active">Projects</a></li>
            <li><a routerLink="/file" class="nav-link" routerLinkActive="active">Files</a></li>
            </ul>
            <div class="auth-buttons" *ngIf="!isLoggedIn">
            <a routerLink="/signup" class="nav-link" routerLinkActive="active">Sign Up</a>
            </div>
            <div class="auth-buttons" *ngIf="!isLoggedIn">
            <a routerLink="/login" class="nav-link" routerLinkActive="active">Sign In</a>
            </div>
            <div class="auth-buttons" *ngIf="isLoggedIn">
            <a routerLink="/profile" class="nav-link" routerLinkActive="active">Profile</a>
            </div>
            <div class="auth-buttons" *ngIf="isLoggedIn">
            <a (click)="logout()" class="nav-link">Logout</a>
            </div>
        </div>
    </nav>
        <div class="filter-section">
            <div class="search-filters">
                <div class="filter-group">
                    <label for="search">Search Events</label>
                    <input type="text" id="search" [(ngModel)]="searchTerm" (keyup)="applyFilters()" placeholder="Search by title, location, or topic...">
                </div>
                <div class="filter-group">
                    <label for="eventType">Event Type</label>
                    <select id="eventType" [(ngModel)]="selectedEventType" (change)="applyFilters()">
                        <option value="">All Types</option>
                        <option value="conference">Conference</option>
                        <option value="workshop">Workshop</option>
                        <option value="seminar">Seminar</option>
                        <option value="symposium">Symposium</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="eventStatus">Status</label>
                    <select id="eventStatus" [(ngModel)]="selectedEventStatus" (change)="applyFilters()">
                        <option value="">All Status</option>
                        <option value="upcoming">Upcoming</option>
                        <option value="ongoing">Ongoing</option>
                        <option value="completed">Completed</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>&nbsp;</label>
                    <div class="add-event-container">
                        <button class="btn-add" (click)="openModal()">+ Add Event</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="events-container" id="eventsContainer">
            <div *ngIf="loading" class="loading-state">Loading events...</div>
            <div *ngIf="errorMessage" class="error-state">{{ errorMessage }}</div>

            <div class="event-card" *ngFor="let event of filteredEvents">
                <div 
                    class="event-status" 
                    [ngClass]="{
                        'status-upcoming': event.status === 'upcoming',
                        'status-ongoing': event.status === 'ongoing',
                        'status-completed': event.status === 'completed'
                    }">
                    {{ event.status | titlecase }} 
                </div>
                
                <img src="/event-test.webp">
                
                <div class="event-date">
                    üìÖ {{ event.startDate }} at 
                </div>
                
                <div class="event-content">
                    <div class="event-title">{{ event.eventName }}</div>
                    <div class="event-description">{{ event.description }}</div>
                    
                    <div class="event-meta">
                        <div class="event-meta-item">
                            <span>üèõÔ∏è</span>
                            <span>{{ event.location }}</span>
                        </div>
                        <div class="event-meta-item">
                            <span>üë•</span>
                            <span>{{ event.availablePlaces || 0 }}/{{ event.maxParticipants }} registered</span> 
                        </div>
                        <div class="event-meta-item">
                            <span>üìã</span>
                            <span>{{ event.eventName | uppercase }}</span>
                        </div>
                    </div>
                    
                    <div class="event-actions">
                        <ng-container [ngSwitch]="event.status">
                            <button 
                                *ngSwitchCase="'upcoming'" 
                                class="btn-register" 
                                (click)="eventAction('Register', event.id)">
                                Register
                            </button>
                            <button 
                                *ngSwitchCase="'completed'" 
                                class="btn-info" 
                                (click)="eventAction('View Materials', event.id)">
                                View Materials
                            </button>
                            <button 
                                *ngSwitchDefault 
                                class="btn-info" 
                                (click)="eventAction('Join Event', event.id)">
                                Join Event
                            </button>
                        </ng-container>
                        
                        <button class="btn-info" (click)="eventAction('Details', event.id)">Details</button>
                    </div>
                </div>
            </div>
            
            <div *ngIf="!loading && !errorMessage && filteredEvents.length === 0" class="no-events-found">
                No events found matching your criteria.
            </div>
        </div>
    </div>
</div>
<!-- add event modal-->
<!-- Add Event Button -->
<div class="add-event-container">
  <button class="btn-add" (click)="openModal()">+ Add Event</button>
</div>

<!-- Modal Overlay -->
<div class="modal-overlay" *ngIf="isModalOpen" (click)="closeModal()"></div>

<!-- Modal -->
<div class="modal" *ngIf="isModalOpen" (click)="$event.stopPropagation()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>Create New Event</h2>
      <button class="close-btn" (click)="closeModal()">&times;</button>
    </div>

    <form (ngSubmit)="onSubmit()" #eventForm="ngForm" class="modal-body">
      <!-- Title -->
      <div class="form-group">
        <label for="eventTitle">Event Title</label>
        <input
          type="text"
          id="eventTitle"
          [(ngModel)]="newEvent.eventName"
          name="eventName"
          placeholder="Enter event title"
          required
        />
      </div>

      <!-- Description -->
      <div class="form-group">
        <label for="eventDescription">Description</label>
        <textarea
          id="eventDescription"
          [(ngModel)]="newEvent.description"
          name="description"
          placeholder="Describe the event..."
          required
        ></textarea>
      </div>

      <!-- Location & Capacity -->
      <div class="form-row">
        <div class="form-group">
          <label for="eventLocation">Location</label>
          <input
            type="text"
            id="eventLocation"
            [(ngModel)]="newEvent.location"
            name="location"
            placeholder="Event venue"
            required
          />
        </div>
        <div class="form-group">
          <label for="eventCapacity">Capacity</label>
          <input
            type="number"
            id="eventCapacity"
            [(ngModel)]="newEvent.maxParticipants"
            name="maxParticipants"
            placeholder="Maximum attendees"
          />
        </div>
      </div>

      <!-- Actions -->
      <div class="modal-actions">
        <button
          type="submit"
          class="btn-save"
          [disabled]="!eventForm.valid"
        >
          Create Event
        </button>
        <button type="button" class="btn-cancel" (click)="closeModal()">
          Cancel
        </button>
      </div>
    </form>
  </div>
</div>
